<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/ProductPage.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/ProductPage.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from "react";
import http from "../services/httpService";
import { apiUrl } from "../config.json";
import ProductCarousel from "./productDetails/ProductCarousel";
import ProductInfo from "./productDetails/ProductInfo";
import { Typography } from "@material-ui/core";
import { useToasts } from "react-toast-notifications";

/**
 * Component - Product page, single product
 * @component
 */
const ProductPage = (props) => {
  const { addToast } = useToasts();
  const productId = props.match.params.productId;
  const [Product, setProduct] = useState([]);
  /**
   * On page load fetch single product data from DB using _id
   */
  useEffect(() => {
    http
      .get(`${apiUrl}/products/product_by_id?id=${productId}`)
      .then((response) => {
        setProduct(response.data[0]);
      });
  }, []);

  /**
   * Send request to server to add a product to the cart
   * @param {String} productId - product id number
   */
  const addToCartHandler = async (productId) => {
    await http
      .post(`${apiUrl}/users/addToCart`, { productId })
      .then((response) => {
        // Replace user's JWT token to new one in local storage
        localStorage.setItem("token", response.data.token);
      })
      .catch((err) =>
        addToast(
          "Error: Unexpcted problem. Coludn't add this products to your cart",
          { appearance: "error" }
        )
      );
    // Move to Cart page
    window.location = "/cart";
  };

  return (
    &lt;div className="container">
      &lt;div className="row justify-content-center">
        {Product.tags &amp;&amp; (
          &lt;div className="mt-4 col-10">{Product.tags.join(" / ")}&lt;/div>
        )}
        &lt;div className="col-12 text-center">
          &lt;Typography className="mt-4" component="h1" variant="h3">
            {Product.title}
          &lt;/Typography>
        &lt;/div>
      &lt;/div>
      &lt;div className="row mt-4">
        &lt;div className="col-lg-12">
          &lt;ProductCarousel product={Product} />
        &lt;/div>
      &lt;/div>
      &lt;div style={{ marginTop: "50px" }}>
        &lt;ProductInfo addToCart={addToCartHandler} product={Product} />
      &lt;/div>
    &lt;/div>
  );
};

export default ProductPage;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ProductPage.html">ProductPage</a></li><li><a href="ProductsLandingPage.html">ProductsLandingPage</a></li><li><a href="Result.html">Result</a></li><li><a href="Signin.html">Signin</a></li><li><a href="Step1.html">Step1</a></li><li><a href="Step2.html">Step2</a></li><li><a href="UploadProduct.html">UploadProduct</a></li><li><a href="UserPage.html">UserPage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getCurrentUser">getCurrentUser</a></li><li><a href="global.html#getJwt">getJwt</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#logout">logout</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Nov 03 2020 02:14:15 GMT+0200 (Israel Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
